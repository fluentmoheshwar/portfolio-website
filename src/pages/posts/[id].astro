---
import { getCollection, render } from "astro:content";
import { FaShare } from "react-icons/fa";
import MainLayout from "../../layouts/Main.astro";
export async function getStaticPaths() {
  const posts = await getCollection("posts");
  return posts.map((post) => ({
    params: { id: post.id },
    props: post,
  }));
}
const post = Astro.props;
const { Content } = await render(post);
---

<MainLayout
  title={post.data.title}
  description={post.data.description}
  socialImage={post.data.socialImage}
  keywords={post.data.keywords}
>
  <article
    class="prose lg:prose-lg *:text-center prose-pre:text-left sm:flex sm:flex-col sm:items-center sm:self-center"
  >
    <h1>{post.data.title}</h1>
    <p class="not-prose text-xl">{post.data.description}</p>
    <p class="not-prose">
      Published on {post.data.publishDate.toLocaleDateString()}
    </p>
    <Content />
    <button type="button" onclick="share();" class="btn mt-2"
      ><FaShare /> Share</button
    >
  </article>
  <script is:inline>
    const share = () => {
      if (navigator.share) {
        navigator.share({
          title: document.title,
          text: document.querySelector("meta[name=description]").content,
          url: window.location.href,
        });
      } else {
        alert(
          "Web Share API is not supported in your browser or operating system!",
        );
      }
    };
  </script>
</MainLayout>
